{"version":3,"sources":["components/PersonForm.js","services/Persons.js","components/Persons.js","components/Filter.js","App.js","index.js"],"names":["PersonForm","newName","newPhone","handleChangeName","handleChangePhone","handleSubmit","id","value","onChange","type","onClick","baseUrl","axios","get","newObject","post","put","delete","Persons","filtro","contacts","deleteHandle","filtered","length","filter","p","name","toLowerCase","search","map","className","number","window","confirm","Filter","handleFilter","Notification","omessage","undefined","console","log","message","iserror","App","prepareNotification","text","boolerror","showMessage","mensaje","setTimeout","setNotification","useState","persons","setPersons","setNewName","setNewPhone","setFilter","notification","useEffect","personServices","then","response","data","catch","error","event","target","preventDefault","updatedPerson","newperson","concat","document","getElementById","focus","ReactDOM","render"],"mappings":"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","file":"static/js/main.be136af5.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst PersonForm = ({newName, newPhone, handleChangeName, handleChangePhone, handleSubmit}) => {\r\n  \r\n    return (\r\n      <form>\r\n          <div>\r\n            <h3>Add new entry</h3>\r\n            <p>name: <input id='inputName' value={newName} onChange={handleChangeName}/></p>          \r\n            <p>number: <input value={newPhone} onChange={handleChangePhone}/></p>          \r\n          </div>\r\n          <div>\r\n            <button type=\"submit\" onClick={handleSubmit} >add</button>\r\n          </div>\r\n      </form>\r\n    )\r\n  }\r\n\r\n\r\nexport default PersonForm","import axios from 'axios'   //esto facilita la vida para hacer llamadas a apis rest\r\n\r\n// const baseUrl = 'http://localhost:3001/api/persons'\r\nconst baseUrl = 'https://afternoon-bastion-93267.herokuapp.com/api/persons'\r\n\r\nconst getAll = () => {\r\n  return axios.get(baseUrl)\r\n    // .then(response => response.data)\r\n    // .catch(console.log('error recuperando listaod'))\r\n}\r\n\r\nconst create = newObject => {\r\n  return axios.post(baseUrl, newObject)    \r\n}\r\n\r\nconst update = (id, newObject) => {  \r\n  return axios.put(`${baseUrl}/${id}`, newObject)    \r\n}\r\n\r\nconst erase = (id) => {\r\n  return axios.delete(`${baseUrl}/${id}`)\r\n}\r\n\r\nexport default { \r\n  getAll: getAll, \r\n  create: create, \r\n  update: update, \r\n  erase: erase\r\n}","import React from 'react'\r\nimport personServices from '../services/Persons'\r\n\r\n\r\nconst Persons = ({filtro, contacts, deleteHandle}) => {      \r\n    let filtered = contacts\r\n    if (filtro !== '' && contacts.length > 0)\r\n        filtered = contacts.filter(p => p.name.toLowerCase().search(filtro.toLowerCase()) >= 0)\r\n\r\n    \r\n    if (filtered.length > 0){        \r\n        return(\r\n            <ul>                        \r\n                {filtered.map(p => <li className='person' key={p.name}>{p.name} {p.number} <button onClick={() => window.confirm('are you sure') ? deleteHandle(p.id) : null}>delete</button></li>)}\r\n            </ul>                \r\n        )\r\n    }\r\n    else return (<></>)        \r\n  }\r\n\r\nexport default Persons","import React from 'react'\r\n\r\nconst Filter = ({filter, handleFilter}) => {    \r\n    return (\r\n      <div>\r\n        filter down with <input value={filter} onChange={handleFilter} />\r\n      </div>\r\n      )\r\n} \r\n\r\nexport default Filter\r\n","import React, { useEffect, useState } from 'react'\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons'\nimport Filter from './components/Filter'\nimport personServices from './services/Persons'\n\n\nconst Notification = ({omessage}) => {  \n  if (omessage === undefined) {\n    console.log (\"1\")\n    return null\n  }\n  console.log ('mensaje', omessage)\n  if (omessage.message === '') {\n    console.log (\"2\")\n    return null\n  }\n  let className = \"notification \"\n  className += omessage.iserror ? 'error' : 'success'  \n  console.log (className)\n\n  return (    \n    <div className={className}>\n      {omessage.message}\n    </div>\n  )\n}\n\n\n\nconst App = () => {  \n\n  const prepareNotification = (text, boolerror) => {return {message:text, iserror:boolerror}}\n  const showMessage = (mensaje, iserror) => {\n    setTimeout(() => setNotification(prepareNotification('',false)), 5000)\n    setNotification(prepareNotification(mensaje, iserror))              \n}\n\n  const [ persons, setPersons ] = useState([]) \n  //useState\n  const [ newName, setNewName ] = useState('')  \n  const [ newPhone, setNewPhone] = useState('')\n  const [ filter, setFilter] = useState('')\n  const [ notification, setNotification] = useState(prepareNotification('', false))\n    \n  useEffect(() => {\n    personServices.getAll().then(response => setPersons(response.data))\n      .catch((error) => console.log (\"error recuperando getall \", error))\n  }, [])\n\n\n\n\n\n  //controladores de eventos\n  const handleSubmit = (event) => {\n    event.preventDefault()            \n    let filtro = persons.filter(p => p.name === newName)\n    if  (filtro.length > 0){\n      console.log(`${newName} already exists, proceeding to update number `)\n      let updatedPerson = {name:newName, number:newPhone, id:filtro[0].id}      \n      personServices.update (filtro[0].id, updatedPerson )\n        .then(() => {                            \n              showMessage(\"user already existed, number updated successfully\", false)\n              setPersons(persons.map (p => p.id !== filtro[0].id ? p : updatedPerson ))              \n            }            \n          )\n        .catch((error) =>  {          \n          showMessage(\"error updating number, user has been deleted, refresh\", true)          \n          // personServices.getAll().then(response => setPersons(response.data))\n          })       \n          \n    }\n    else{\n      if (newName === '' || newPhone === ''){\n        showMessage(`you have to add a number and a name`, true)\n      }\n      else{\n        let newperson = {name:newName, number:newPhone}\n        personServices.create(newperson).then(response => \n              {                \n                showMessage(`${newperson.name} added successfully`, false)\n                setPersons(persons.concat(response.data))\n              }\n            ).catch(error => console.log('error adding', error)) //saving to database.        \n        setNewName ('')\n        setNewPhone('')\n        document.getElementById('inputName').focus()        \n      }\n    }    \n  }  \n\n  const handleChangeName = (event) => setNewName(event.target.value)\n  const handleChangePhone = (event) => setNewPhone(event.target.value)\n  const handleFilter = (event) => setFilter(event.target.value)     \n  const deleteHandle = (id) => {          \n    personServices.erase(id).then(console.log (\"borrado\")).\n      catch(error => showMessage(`Person ${id} was already deleted`, true))      \n    setPersons(persons.filter (p => p.id !== id))\n}\n\n  \n  \n  return (\n    <div>      \n\n      <h1>Phonebook</h1>\n      <Notification omessage={notification}/>\n      {/* filter down with <input value={filter} onChange={handleFilter}/> */}\n      <Filter filter={filter} handleFilter={handleFilter}/>\n      <PersonForm newName={newName} newPhone={newPhone} handleChangeName={handleChangeName} handleChangePhone={handleChangePhone} handleSubmit={handleSubmit} />      \n      <h2>Numbers</h2>\n      <Persons filtro={filter} contacts={persons} deleteHandle={deleteHandle}/>      \n    </div>\n  )\n}\n\nexport default App","// import React from 'react';\n// import ReactDOM from 'react-dom';\nimport './index.css';\n// import App from './App';\n// import reportWebVitals from './reportWebVitals';\n\n// ReactDOM.render(\n//   <React.StrictMode>\n//     <App />\n//   </React.StrictMode>,\n//   document.getElementById('root')\n// );\n\n// // If you want to start measuring performance in your app, pass a function\n// // to log results (for example: reportWebVitals(console.log))\n// // or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n\n\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, \ndocument.getElementById('root'))"],"sourceRoot":""}