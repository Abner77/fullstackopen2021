(this.webpackJsonpmuletto=this.webpackJsonpmuletto||[]).push([[0],{15:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);t(15);var r=t(14),c=t.n(r),o=t(3),a=t(2),u=t(0),i=function(e){var n=e.newName,t=e.newPhone,r=e.handleChangeName,c=e.handleChangePhone,o=e.handleSubmit;return Object(u.jsxs)("form",{children:[Object(u.jsxs)("div",{children:[Object(u.jsx)("h3",{children:"Add new entry"}),Object(u.jsxs)("p",{children:["name: ",Object(u.jsx)("input",{id:"inputName",value:n,onChange:r})]}),Object(u.jsxs)("p",{children:["number: ",Object(u.jsx)("input",{value:t,onChange:c})]})]}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{type:"submit",onClick:o,children:"add"})})]})},s=t(4),l=t.n(s),d="https://afternoon-bastion-93267.herokuapp.com/api/persons",h=function(){return l.a.get(d)},j=function(e){return l.a.post(d,e)},f=function(e,n){return console.log("llamando a puta",n),l.a.put("".concat(d,"/").concat(e),n)},b=function(e){return l.a.delete("".concat(d,"/").concat(e))},m=function(e){var n=e.filtro,t=e.contacts,r=e.deleteHandle,c=t;return""!==n&&t.length>0&&(c=t.filter((function(e){return e.name.toLowerCase().search(n.toLowerCase())>=0}))),c.length>0?Object(u.jsx)("ul",{children:c.map((function(e){return Object(u.jsxs)("li",{className:"person",children:[e.name," ",e.number," ",Object(u.jsx)("button",{onClick:function(){return window.confirm("are you sure")?r(e.id):null},children:"delete"})]},e.name)}))}):Object(u.jsx)(u.Fragment,{})},g=function(e){var n=e.filter,t=e.handleFilter;return Object(u.jsxs)("div",{children:["filter down with ",Object(u.jsx)("input",{value:n,onChange:t})]})},O=function(e){var n=e.omessage;if(void 0==n)return console.log("1"),null;if(console.log("mensaje",n),""==n.message)return console.log("2"),null;var t="notification ";return t+=n.iserror?"error":"success",console.log(t),Object(u.jsx)("div",{className:t,children:n.message})},p=function(){var e=function(e,n){return{message:e,iserror:n}},n=function(n,t){setTimeout((function(){return H(e("",!1))}),5e3),H(e(n,t))},t=Object(a.useState)([]),r=Object(o.a)(t,2),c=r[0],s=r[1],l=Object(a.useState)(""),d=Object(o.a)(l,2),p=d[0],x=d[1],v=Object(a.useState)(""),w=Object(o.a)(v,2),y=w[0],C=w[1],N=Object(a.useState)(""),S=Object(o.a)(N,2),k=S[0],P=S[1],E=Object(a.useState)(e("",!1)),F=Object(o.a)(E,2),B=F[0],H=F[1];console.log("notification",B),Object(a.useEffect)((function(){h().then((function(e){return s(e.data)})).catch(console.log("error recuperando listado"))}),[]);return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Phonebook"}),Object(u.jsx)(O,{omessage:B}),Object(u.jsx)(g,{filter:k,handleFilter:function(e){return P(e.target.value)}}),Object(u.jsx)(i,{newName:p,newPhone:y,handleChangeName:function(e){return x(e.target.value)},handleChangePhone:function(e){return C(e.target.value)},handleSubmit:function(e){e.preventDefault();var t=c.filter((function(e){return e.name==p}));if(t.length>0){console.log("".concat(p," already exists, proceeding to update number "));var r={name:p,number:y,id:t[0].id};f(t[0].id,r).then((function(){n("user already existed, number updated successfully",!1),s(c.map((function(e){return e.id!==t[0].id?e:r})))})).catch((function(e){console.log("error",e),n("error updating number, user has been deleted",!0),h().then((function(e){return s(e.data)}))})).catch(console.log("error recuperando listado"))}else if(""==p||""==y)n("you have to add a number and a name",!0);else{var o={name:p,number:y};j(o).then((function(e){n("".concat(o.name," added successfully"),!1),s(c.concat(e.data))})).catch((function(e){return console.log("error adding",e)})),x(""),C(""),document.getElementById("inputName").focus()}}}),Object(u.jsx)("h2",{children:"Numbers"}),Object(u.jsx)(m,{filtro:k,contacts:c,deleteHandle:function(e){b(e).then(console.log("borrado")).catch((function(t){return n("Person ".concat(e," was already deleted"),!0)})),s(c.filter((function(n){return n.id!==e})))}})]})};c.a.render(Object(u.jsx)(p,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.39ab2769.chunk.js.map